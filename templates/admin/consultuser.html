{% extends('layouts/navbaradmin.html')%}
{% block content %}
 <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Utilisateur</h1>
        <h1 class="h3 mb-0 text-gray-800">Admin</h1>
    </div>

         <div class="col-md-8">
             {% with messages = get_flashed_messages(category_filter=["error"]) %}
                 {% if messages %}
                     <div class="alert alert-danger">
                         {% for message in messages %}
                             <p>{{ message }}</p>
                         {% endfor %}
                     </div>
                 {% endif %}
             {% endwith %}
             {% with messages = get_flashed_messages(category_filter=["success"]) %}
                 {% if messages %}
                     <div class="alert alert-success">
                         {% for message in messages %}
                             <p>{{ message }}</p>
                         {% endfor %}
                     </div>
                 {% endif %}
             {% endwith %}
         </div>
    <div class="row justify-content-left">
       <div class="col-md-12">
           <br />
           <div class="card">
               <div class="card-header bgsize-primary-4 white card-header">
                   <h4 class="card-title">Tableau de donn√©es des utilisateurs</h4>
               </div>
               <div class="card-body">
                   <div class="pull-right">

                   </div>
                   <div class=" card-content table-responsive">
         <table class="table table-hover">
             <tr class="table-primary">
                 <th>#</th>
                 <th>Nom</th>
                 <th>Prenom</th>
                 <th>Email</th>
                 <th>Numero de telephone</th>
                 <th>Role</th>
                 <th>Action</th>
             </tr>
             {% for us in users %}
                 <tr>
                     <td>{{ us.0 }}</td>
                     <td>{{ us.1 }}</td>
                     <td>{{ us.2 }}</td>
                     <td>{{ us.3 }}</td>
                     <td>{{ us.4 }}</td>
                     <td>{{ us.5 }}</td>
                     <td>
                        <a href="" data-toggle="modal" data-target="#exampleModal{{ us.0 }}" class="btn btn-warning"><i class="bi bi-pencil"></i>Modifier</a>

                        <form method="post" action="delete/{{ us.0 }}">
                             <Button type="submit" onclick="return confirm('etes-vous sur de supprimer')" class="btn btn-danger"><i class="bi bi-trash3"></i>Supprimer</Button>
                        </form>
                     </td>
                 </tr>
                 <!-- Modal -->
                <div class="modal fade" id="exampleModal{{ us.0 }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modifier utilisateur</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
         <form action="updateuser/{{ us.0 }}" method="post">
      <div class="modal-body">
          <div class="form-group">
              <label>Nom</label>
              <input type="text" name="first_name" value="{{ us.1 }}" class="form-control" required>
          </div>
          <div class="form-group">
              <label >Prenom</label>
              <input type="text" name="last_name" value="{{ us.2 }}" class="form-control" required>
          </div>
          <div class="form-group">
              <label >Numero de telephone</label>
              <input type="tel" name="phone" value="{{ us.4 }}" id="phone" class="form-control input-sm" >
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
        <button type="submit" class="btn btn-primary">Sauvegarder les modifications</button>
      </div>
      </form>
    </div>
  </div>
</div>
             {% endfor %}
         </table>
         </div>
     </div>
   </div>
{% endblock %}